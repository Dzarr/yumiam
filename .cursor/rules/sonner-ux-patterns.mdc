---
description: Bonnes pratiques pour lâ€™usage de Sonner dans une interface React + Tailwind
globs: src/components/**/*.{tsx,jsx}, src/lib/notifications.ts
alwaysApply: true
---

# Rule 5.1 â€“ Notifications UX avec Sonner (sonner-ux-patterns)

## Objectif

Standardiser lâ€™usage des notifications toast (`sonner`) pour signaler clairement les actions rÃ©ussies ou Ã©chouÃ©es. Ces toasts doivent Ãªtre concis, utiles, non intrusifs, et accessibles.

## Technologies concernÃ©es

- React
- `sonner`
- TailwindCSS

## Principes

- Afficher un toast pour toute action critique :
  - succÃ¨s utilisateur (formulaire, ajout, suppressionâ€¦)
  - Ã©chec explicite (validation, permissionâ€¦)
- Ne pas sur-notifier des actions passives ou implicites
- DÃ©clencher les toasts dans la couche logique (hook, mutation, handler)

## Exemple minimal

```tsx
import { toast } from "sonner";

toast.success("InvitÃ© ajoutÃ© avec succÃ¨s");
toast.error("Ã‰chec lors de la sauvegarde");
```

## Exemple avec useMutation
```tsx
useMutation({
  mutationFn: updateGuest,
  onSuccess: () => {
    toast.success("InvitÃ© modifiÃ©");
    queryClient.invalidateQueries(guestKeys.list());
  },
  onError: () => {
    toast.error("Erreur lors de la modification");
  },
});
```

## Exemple combinÃ© avec Rule 5.3
```tsx
const { data, isLoading, isError } = useQuery({
  queryKey: ["guests"],
  queryFn: fetchGuests,
  onError: () => toast.error("Erreur lors du chargement des invitÃ©s"),
});

if (isLoading) return <LoadingScreen />;
if (isError) return <ErrorCard message="Impossible de charger les invitÃ©s" />;
```
## Bonnes pratiques
Centraliser les messages (optionnel) dans lib/notifications.ts

Utiliser :

âœ… toast.success â†’ action utilisateur validÃ©e

âœ… toast.error â†’ retour dâ€™erreur explicite

ğŸ”¶ toast.info â†’ rarement utile (Ã©vÃ©nement passif)

Garder les messages trÃ¨s courts (7â€“10 mots max)

## AccessibilitÃ©
DurÃ©e recommandÃ©e : 3000â€“5000ms

Toujours fournir un message unique et clair

Ã‰viter les messages vagues : "Une erreur est survenue"

## RÃ¨gle dâ€™or
Une notification toast rÃ©pond Ã  la question implicite :
"Avait-il besoin de le savoir tout de suite ?"
Si non, ne la dÃ©clenche pas.
